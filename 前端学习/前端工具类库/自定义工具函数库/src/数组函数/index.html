<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数组函数</title>
</head>
<body>
  <script>
    function map(arr, callback) {
      let newArr = []
      for (let i = 0; i < arr.length; i++) {
        newArr.push(callback(arr[i], i))
      }
      return newArr
    }

    function reduce(arr, callback, initVal) {
      let result = initVal
      for (let i = 0; i < arr.length; i++) {
        result = callback(result, arr[i])
      }
      return result
    }

    function filter(arr, callback) {
      let result = []
      for (let i = 0; i < arr.length; i++) {
        if (callback(arr[i], i)) {
          result.push(arr[i])
        }
      }
      return result
    }

    function find(arr, callback) {
      for (let i = 0; i < arr.length; i++) {
        if (callback(arr[i], i)) {
          return arr[i]
        }
      }
      return undefined
    }

    function findIndex(arr, callback) {
      for (let i = 0; i < arr.length; i++) {
        if (callback(arr[i], i)) {
          return i
        }
      }
      return -1
    }

    function every(arr, callback) {
      for (let i = 0; i < arr.length; i++) {
        if (!callback(arr[i], i)) {
          return false
        }
      }
      return true
    }

    function some(arr, callback) {
      for (let i = 0; i < arr.length; i++) {
        if (callback(arr[i], i)) {
          return true
        }
      }
      return false
    }

    function unique1(array) {
      const arr = []
      array.forEach(item => {
        if (arr.indexOf(item)===-1) {
          arr.push(item)
        }
      })
      return arr
    }

    function unique2(array) {
      const arr = []
      const obj = {}
      array.forEach(item => {
        if (!obj.hasOwnProperty(item)) {
          obj[item] = true
          arr.push(item)
        }
      })
      return arr
    }

    function unique3(array) {
      return [...new Set(arr)]
    }

    function concat(arr, ...args) {
      let result = [...arr]
      args.forEach(item=>{
        if (Array.isArray(item)) {
          result.push(...item)
        } else {
          result.push(item)
        }
      })
      return result
    }

    function slice(arr, start, end) {
      if (arr.length===0 || start >= arr.length) {
        return []
      }
      start = start || 0
      end = end || arr.length
      if (end < start) {
        end = arr.length
      }

      let result = []
      for (let i = 0; i < arr.length; i++) {
        if (i >= start && i < end) {
          result.push(arr[i])
        }
      }
      return result
    }

    function flatten1(arr) {
      let result = []
      arr.forEach(item=>{
        if (Array.isArray(item)) {
          result = result.concat(flatten1(item))
        } else {
          result = result.concat(item)
        }
      })
      return result
    }

    function flatten2(arr) {
      let result = [...arr]
      while(result.some(item=>Array.isArray(item))){
        result = [].concat(...result)        
      }
      return result
    }

    function chunk(arr, size) {
      if (arr.length === 0) {
        return []
      }
      size = size || 1

      const result = []
      let tempArr = []

      arr.forEach(item=>{        
        if (tempArr.length === 0) {
          result.push(tempArr)
        }
        tempArr.push(item)
        if (tempArr.length === size) {
          tempArr = []
        }      
      })
      return result
    }

    let arr = [1,2,3,4,5,3,4,3]
    // 
      // console.log(map(arr, function (item, i) {
      //   return item * 10
      // }));

      // console.log(reduce(arr, function(res, value){
      //   return res + value
      // }, 0));

      // console.log(filter(arr, (item, i)=>{
      //   return item > 2
      // }));

      // console.log(find(arr, (item, i)=>{
      //   return item > 2
      // }));

      // console.log(findIndex(arr, (item, i)=>{
      //   return item > 2
      // }));

      // console.log(every(arr, (item, i)=>{
      //   return item > 0
      // }));

      // console.log(some(arr, (item, i)=>{
      //   return item > 10
      // }));

      // console.log(unique1(arr));
      // console.log(unique2(arr));
      // console.log(unique3(arr));

    // console.log(concat([1,2], [3,4]));
    // console.log(concat([1,2], [3,4], 5, 6));
    // console.log(slice(arr, 1, 3));
    // console.log(flatten1([1,2,[3,4,[5,6]]]));
    // console.log(flatten2([1,2,[3,4,[5,6]]]));
    console.log(chunk([1,2,3,4,5,6], 2));
  </script>
</body>
</html>